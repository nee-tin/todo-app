<script>
  // ====== Load tasks from localStorage or start with empty array ======
  let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

  // ====== App state: which tasks to display ======
  let currentFilter = "all";

  // ====== Cache input element ======
  const input = document.getElementById("taskInput");

  // ====== Render tasks to the DOM ======
  function renderTasks() {
  const taskList = document.getElementById("taskList");
  taskList.innerHTML = "";

   // Filter tasks based on current filter
   let filteredTasks = tasks;
   if (currentFilter === "active") filteredTasks = tasks.filter(task => !task.completed);
   if (currentFilter === "completed") filteredTasks = tasks.filter(task => task.completed);
 
   const emptyMessage = document.getElementById("emptyMessage");

   // Show or hide empty message if no tasks exist
   if (tasks.length === 0) {
     emptyMessage.classList.add("show");
   } else {
     emptyMessage.classList.remove("show");
   }

   // Render each task
    filteredTasks.forEach((task, index) => {
    const li = document.createElement("li");
    li.textContent = task.text;

    // Toggle completion status when clicking task
    li.onclick = function () {
    task.completed = !task.completed;
    localStorage.setItem("tasks", JSON.stringify(tasks));
    renderTasks();
    };

    if (task.completed) li.classList.add("completed");

    // ====== Edit button ======
    const editBtn = document.createElement("button");
    editBtn.textContent = "Edit";
    editBtn.className = "edit-btn";

    editBtn.onclick = function (e) {
      e.stopPropagation(); // Prevent toggling completion when editing
     const newText = prompt("Edit task:", task.text);
     if (newText && newText.trim() !== "") {
     task.text = newText.trim();
     localStorage.setItem("tasks", JSON.stringify(tasks));
        renderTasks();
      }
    };

    // ====== Delete button ======
    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete";
    deleteBtn.className = "delete-btn";

    deleteBtn.onclick = function (e) {
    e.stopPropagation(); // Prevent toggling completion when deleting
    tasks.splice(tasks.indexOf(task), 1); // Remove task from array
    localStorage.setItem("tasks", JSON.stringify(tasks));
    renderTasks();
    };

    li.appendChild(editBtn);
    li.appendChild(deleteBtn);
    taskList.appendChild(li);
  });
 }

 // ====== Change task filter ======
  function setFilter(filter) {
   currentFilter = filter;
   renderTasks();
 }

// ====== Add new task ======
  function addTask() {
  const taskText = input.value.trim();
  if (taskText === "") return; // Ignore empty input

  tasks.push({ text: taskText, completed: false });
  localStorage.setItem("tasks", JSON.stringify(tasks));

  renderTasks();
  input.value = ""; // Clear input field
  input.focus();    // Focus input for convenience
}

 // ====== Enter key support for adding task ======
input.addEventListener("keypress", function (e) {
  if (e.key === "Enter") addTask();
});

// ====== Initial render ======
renderTasks();
</script>


